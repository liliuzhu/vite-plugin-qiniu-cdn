{"version":3,"file":"index.cjs.js","sources":["../src/qiniu-plugin.ts","../src/index.ts"],"sourcesContent":[null,null],"names":["tip","uploaded","failed","total","retrying","Math","round","QiniuPlugin","constructor","options","this","uploadFiles","assets","exclude","include","batch","maxRetryTimes","mac","qiniu","auth","digest","Mac","accessKey","secretKey","qiniuConfig","conf","Config","bucket","zone","uploadPath","path","filesNames","Object","keys","totalFiles","uploadedFiles","retryFiles","retryFilesCountDown","_finish","err","spinner","succeed","console","log","filter","fileName","test","length","ora","text","color","start","performUpload","file","key","posix","join","uploadToken","rs","PutPolicy","scope","formUploader","form_up","FormUploader","putExtra","PutExtra","Promise","resolve","begin","Date","now","putFile","existsAt","body","message","name","stack","indexOf","push","duration","retryFailedFiles","reject","_files","splice","all","map","then","Error","execStack","defaultOptions","enable","root","getFilePaths","dir","sourceFilesDir","fs","readdirSync","item","filePath","stat","lstatSync","isDirectory","isFile","replace","flat","vitePluginQiniuCDN","propOption","option","assign","enforce","apply","configResolved","config","build","outDir","forEach","field","closeBundle","files"],"mappings":"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"}